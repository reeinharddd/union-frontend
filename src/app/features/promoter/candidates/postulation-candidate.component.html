<div class="mx-auto max-w-6xl p-6">
  <h2 class="mb-6 text-center text-2xl font-bold text-gray-800">Oportunidades con Candidatos</h2>

  <div
    *ngFor="let oportunidad of oportunidades"
    class="mb-8 rounded-lg border bg-white p-6 shadow-md"
  >
    <h3 class="text-xl font-semibold text-gray-800">{{ oportunidad.titulo }}</h3>
    <p class="text-sm text-gray-600">
      Universidad: {{ universidadesMap[oportunidad.universidad_id] || 'N/A' }}
    </p>
    <p class="text-sm text-gray-600">
      Tipo: {{ tiposOportunidadMap[oportunidad.opportunity_type_id] || 'N/A' }}
    </p>
    <p class="text-sm text-gray-600">
      Modalidad: {{ modalidadesMap[oportunidad.modality_id] || 'N/A' }}
    </p>
    <p class="text-sm text-gray-600">Fecha límite: {{ oportunidad.fecha_limite }}</p>

    <div class="mt-4">
      <h4 class="mb-2 font-semibold text-gray-700">Postulaciones:</h4>

      <table class="min-w-full border text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2 text-left">Nombre</th>
            <th class="px-4 py-2 text-left">Correo</th>
            <th class="px-4 py-2 text-left">Fecha</th>
            <th>Acciones</th>
            <!-- Nueva columna -->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let post of postulacionesPorOportunidad[oportunidad.id]" class="border-t">
            <td class="px-4 py-2">{{ post.nombre_usuario || 'Desconocido' }}</td>
            <td class="px-4 py-2">{{ post.correo_usuario || 'N/A' }}</td>
            <td class="px-4 py-2">{{ post.fecha | date }}</td>
            <td>
              <button
                class="mr-2 rounded bg-green-500 px-2 py-1 text-white hover:bg-green-600"
                (click)="aceptarPostulacion(post.id)"
              >
                Aceptar
              </button>
              <button
                class="rounded bg-red-500 px-2 py-1 text-white hover:bg-red-600"
                (click)="rechazarPostulacion(post.id)"
              >
                Rechazar
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <ng-template #sinPostulaciones>
        <p class="text-sm text-gray-500">No hay usuarios postulados aún.</p>
      </ng-template>
    </div>
  </div>
</div>
